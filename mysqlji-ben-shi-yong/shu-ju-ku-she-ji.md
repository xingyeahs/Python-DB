# 数据库设计 {#数据库设计}

* 关系型数据库建议在E-R模型的基础上，我们需要根据产品经理的设计策划，抽取出来模型与关系，制定出表结构，这是项目开始的第一步
* 在开发中有很多设计数据库的软件，常用的如power designer，db desinger等，这些软件可以直观的看到实体及实体间的关系
* 设计数据库，可能是由专门的数据库设计人员完成，也可能是由开发组成员完成，一般是项目经理带领组员来完成
* 对于大家，不需要独立完成数据库设计，但是要积累一些这方面的经验

#### E-R模型 {#er模型}

* E表示entry，实体，设计实体就像定义一个类一样，指定从哪些方面描述对象，一个实体转换为数据库中的一个表
* R表示relationship，关系，关系描述两个实体之间的对应规则，包括一对一、一对多、多对多，关系也是一种数据，需要以一个字段的形式存储在表中，根据对应方式的不同，存储也有不同的方案
  * A对B为1对1：在表A或表B中创建一个字段，存储另一个表的主键值
  * A对B为1对多：在表B中创建一个字段，存储表A的主键值
  * A对B为多对多：新建一张表C，这个表只有两个字段，一个用于存储A的主键值，一个用于存储B的主键值

#### 三范式 {#三范式}

* 经过研究和对使用中问题的总结，对于设计数据库提出了一些规范，这些规范被称为范式
* 数据库设计中一共有6个范式，一般需要遵守3范式即可
* 第一范式（1NF\)：数据库表的每一列都是不可分割的原子数据项，即列不可拆分
* 第二范式（2NF\)：建立在第一范式的基础上，要求数据库表中的每个实例或记录必须可以被唯一地区分，即唯一标识
* 第三范式（3NF\)：建立在第二范式的基础上，任何非主属性不依赖于其它非主属性，即引用主键

#### 逻辑删除 {#逻辑删除}

* 对于重要数据，并不希望物理删除，一旦删除，数据无法找回
* 删除方案：设置一个isDelete的列，类型为bit，表示逻辑删除，默认值为0
* 对于非重要数据，可以进行物理删除
* 数据的重要性，要根据实际开发决定

#### 示例 {#示例}

* 设计两张表：班级表、学生表
* 班级表classes
  * id
  * name
  * isdelete
* 学生表students
  * id
  * name
  * birthday
  * gender
  * hometown
  * clsid
  * isdelete

#### 扩展 {#扩展}

* 看看别人家设计的规范
* [58到家数据库30条军规解读](http://mp.weixin.qq.com/s/Yjh_fPgrjuhhOZyVtRQ-SA)



